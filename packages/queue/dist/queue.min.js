(()=>{function o(i,t,e){if(typeof i!="number"||isNaN(i))throw new Error("The first value passed into the `makeKey` function must be a number!");if(t&&(t instanceof Array&&(t=t.join("")),typeof t!="string"))throw new Error("The second argument passed into the `makeKey` function must be a string or array of strings!");if(e=e||Math.random,typeof e!="function")throw new Error("The third argument passed into the `makeKey` function must be a function!");let s="";t=t||"abcdef1234567890";for(let n=0;n<i;n++)s+=t[Math.floor(e()*t.length)];return s}function u(i){return new Promise((t,e)=>{try{let s=performance.now();return setTimeout(()=>t(performance.now()-s),i)}catch(s){return e(s)}})}var r=class{interval=null;isRunning=!1;jobs=[];results={};timeBetweenJobs=100;constructor(t){this.timeBetweenJobs=typeof t>"u"?this.timeBetweenJobs:t}append(t){let e=o(8);return this.jobs.push({fn:t,id:e}),this.start(),e}async retrieve(t){for(;!this.results[t];)await u(10);return this.results[t]}async process(t){let e=this.append(t);return await this.retrieve(e)}start(){if(this.isRunning)return;this.isRunning=!0;let t=!1,e=async()=>{if(t)return;if(t=!0,!this.jobs||this.jobs.length===0)return this.stop();let s=this.jobs.shift(),n=await s.fn();this.results&&(this.results[s.id]=n),t=!1};return e(),this.interval=setInterval(e,this.timeBetweenJobs),this}stop(){return this.interval&&(clearInterval(this.interval),this.interval=null),this.isRunning=!1,this}destroy(){this.stop(),this.jobs=null,this.results=null,this.interval=null,this.isRunning=null,this.timeBetweenJobs=null}};typeof globalThis<"u"&&(globalThis.Queue=r);})();
