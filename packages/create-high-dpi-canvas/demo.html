<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        border: 0;
        width: 100vw;
        height: 100vh;
        overflow: hidden;
      }
    </style>
  </head>
  <body>
    <script src="dist/create-high-dpi-canvas.standalone.cjs"></script>
    <script>
      let width = window.innerWidth
      let height = window.innerHeight
      const canvas = createHighDPICanvas(width, height)
      document.body.appendChild(canvas)
      canvas.width = width
      canvas.height = height

      function draw() {
        const context = canvas.getContext("2d")
        context.fillStyle = "rgb(235, 235, 235)"
        context.fillRect(0, 0, width, height)

        const blockSize = 32
        const padding = blockSize * 4
        context.strokeStyle = "black"
        context.lineWidth = 2

        for (let x = padding; x < width - padding; x += blockSize) {
          for (let y = padding; y < height - padding; y += blockSize) {
            const hue = Math.random() * 360
            context.fillStyle = `hsl(${hue}deg, 100%, 50%)`
            context.fillRect(x, y, blockSize, blockSize)
            context.strokeRect(x, y, blockSize, blockSize)
          }
        }
      }

      draw()

      canvas.addEventListener("resize", () => draw())

      window.addEventListener("resize", () => {
        width = window.innerWidth
        height = window.innerHeight
        canvas.width = width
        canvas.height = height
      })
    </script>
  </body>
</html>
